{"version":3,"sources":["controller/grid/AbstractGridController.ts"],"names":[],"mappings":"AAAA;;GAEG;;;IAUH;QAgBI;YATA,UAAK,GAAgB;gBACjB,EAAC,IAAI,EAAC,GAAG,EAAC,MAAM,EAAC,QAAQ,EAAC,KAAK,EAAC,IAAI,EAAE,OAAO,EAAC,SAAS,EAAE,MAAM,EAAC,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAC;aAClG,CAAC;YAGF,sBAAiB,GAAW,+BAA+B,CAAC;YAC5D,oBAAe,GAAW,6BAA6B,CAAC;YAUxD;;eAEG;YACH,WAAM,GAAG;gBAEL,gDAAgD;YACpD,CAAC,CAAC;YAEF,YAAY;YACZ,SAAI,GAAG;gBAEH,IAAI,CAAC,YAAY,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC7C,IAAI,CAAC,YAAY,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC;gBACtE,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,CAAC,CAAC;gBAElC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC9D,IAAI,iBAAiB,GAAG,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,GAAG,EAAE,CAAC;oBAChH,EAAE,CAAC,CAAC,CAAC,GAAG,iBAAiB,KAAK,CAAC,CAAC,CAAC,CAAC;wBAC9B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU;oBACtH,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC7G,CAAC;gBACL,CAAC;gBAED,oDAAoD;gBACpD,yBAAyB;gBACzB,0DAA0D;gBAC1D,iCAAiC;gBACjC,oCAAoC;gBACpC,SAAS;gBACT,oBAAoB;gBACpB,KAAK;YACT,CAAC,CAAC;YAtCE,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;YACvC,IAAI,CAAC,YAAY,CAAC,GAAG,GAAG,8BAA8B,CAAC;YACvD,IAAI,CAAC,IAAI,EAAE,CAAC;QAEhB,CAAC;QANM,8BAAO,GAAG,CAAC,SAAS,CAAC,CAAC;QAyCjC,6BAAC;IAAD,CAxDA,AAwDC,IAAA;IAED,OAAS,sBAAsB,CAAC","file":"controller/grid/AbstractGridController.js","sourcesContent":["/**\r\n * Created by zhida.wen on 2016/10/8.\r\n */\r\n\r\n/// <reference path=\"../../../../typings/main.d.ts\" />\r\n\r\n\r\nimport {app} from \"../../../config\";\r\nimport GridProperty = require(\"./GridProperty\");\r\nimport PersonDto = require(\"./PersonDto\");\r\nimport \"../../directive/grid/qsGrid\";\r\n\r\nclass AbstractGridController {\r\n\r\n    gridProperty: GridProperty;\r\n    queryString: string;\r\n\r\n    $filter: ng.IFilterService;\r\n\r\n    items: PersonDto[] = [\r\n        {\"id\":\"1\",\"name\":\"name 1\",\"age\":\"11\", \"email\":\"a@q.com\", \"dept\":\"15750\", \"telephone\": \"123232\"}\r\n    ];\r\n\r\n\r\n    gridSearchJsonUrl: string = '../../../data/gridSearch.json';\r\n    gridCrudJsonUrl: string = '../../../data/gridCrud.json';\r\n\r\n    static $inject = [\"$filter\"];\r\n    constructor() {\r\n        this.gridProperty = new GridProperty();\r\n        this.gridProperty.url = '../../../data/gridPanel.json';\r\n        this.init();\r\n\r\n    }\r\n\r\n    /*\r\n     过滤数据并显示\r\n     */\r\n    search = function () {\r\n\r\n        //GridCommon.orderAndDisplay(this.gridProperty);\r\n    };\r\n\r\n    // 加载数据并刷新视图\r\n    init = function () {\r\n\r\n        this.gridProperty.filteredItems = this.items;\r\n        this.gridProperty.totalItems = this.gridProperty.filteredItems.length;\r\n        this.gridProperty.currentPage = 1;\r\n\r\n        for (let i = 0; i < this.gridProperty.filteredItems.length; i++) {\r\n            let itemsPerPageLocal = angular.isDefined(this.gridProperty.itemsPerPage) ? this.gridProperty.itemsPerPage : 10;\r\n            if (i % itemsPerPageLocal === 0) {\r\n                this.gridProperty.pagedItems[Math.floor(i / itemsPerPageLocal)] = [this.gridProperty.filteredItems[i]]; // 初始化一个数组\r\n            } else {\r\n                this.gridProperty.pagedItems[Math.floor(i / itemsPerPageLocal)].push(this.gridProperty.filteredItems[i]);\r\n            }\r\n        }\r\n\r\n        //GridJsonRepository.getAll().then(function(items) {\r\n        //    this.items = items;\r\n        //    angular.forEach(this.items, function (item, index) {\r\n        //        item.gridIndex = index;\r\n        //        item.itemSelected = false;\r\n        //    });\r\n        //    this.search();\r\n        //});\r\n    };\r\n}\r\n\r\nexport = AbstractGridController;"],"sourceRoot":"/source/"}