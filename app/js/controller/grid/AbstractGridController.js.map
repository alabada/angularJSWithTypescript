{"version":3,"sources":["controller/grid/AbstractGridController.ts"],"names":[],"mappings":"AAAA;;GAEG;;;IAWH;QAaI,+BAA+B;QAC/B,gCAAY,kBAAuB;YANnC,UAAK,GAAgB,EAAE,CAAC;YAExB,sBAAiB,GAAW,+BAA+B,CAAC;YAC5D,oBAAe,GAAW,6BAA6B,CAAC;YASxD;;eAEG;YACH,WAAM,GAAG;gBACL,IAAI,CAAC,YAAY,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC7C,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,YAAY;YACZ,SAAI,GAAiC,UAAS,kBAAkB;gBAC5D,IAAI,EAAE,GAAE,IAAI,CAAC;gBACb,kBAAkB,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,UAAS,KAAK;oBAC3C,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE,KAAK;wBACxC,IAAI,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;wBAC7B,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;wBACpB,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;wBACxB,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;wBACtB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;wBAC1B,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;wBACxB,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;wBAElC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;wBACzB,MAAM,CAAC,YAAY,GAAG,KAAK,CAAC;wBAE5B,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBAC1B,CAAC,CAAC,CAAA;oBACF,EAAE,CAAC,MAAM,EAAE,CAAC;gBAChB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC;YAjCE,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;YACvC,IAAI,CAAC,iBAAiB,GAAG,IAAI,iBAAiB,EAAE,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAClC,CAAC;QA+BL,6BAAC;IAAD,CAjDA,AAiDC,IAAA;IAED,OAAS,sBAAsB,CAAC","file":"controller/grid/AbstractGridController.js","sourcesContent":["/**\r\n * Created by zhida.wen on 2016/10/8.\r\n */\r\n\r\n/// <reference path=\"../../../../typings/main.d.ts\" />\r\n\r\n\r\nimport {app} from \"../../../config\";\r\nimport GridProperty = require(\"./GridProperty\");\r\nimport PersonDto = require(\"./PersonDto\");\r\nimport \"../../directive/grid/qsGrid\";\r\nimport GridCommonService = require(\"../../service/GridCommonService\");\r\n\r\nabstract class AbstractGridController {\r\n\r\n    gridProperty: GridProperty;\r\n    queryString: string;\r\n\r\n    $filter: ng.IFilterService;\r\n    gridCommonService: GridCommonService;\r\n\r\n    items: PersonDto[] = [];\r\n\r\n    gridSearchJsonUrl: string = '../../../data/gridSearch.json';\r\n    gridCrudJsonUrl: string = '../../../data/gridCrud.json';\r\n\r\n    //static $inject = [\"$filter\"];\r\n    constructor(GridJsonRepository: any) {\r\n        this.gridProperty = new GridProperty();\r\n        this.gridCommonService = new GridCommonService();\r\n        this.init(GridJsonRepository);\r\n    }\r\n\r\n    /*\r\n     过滤数据并显示\r\n     */\r\n    search = function () {\r\n        this.gridProperty.filteredItems = this.items;\r\n        this.gridCommonService.orderAndDisplay(this.gridProperty);\r\n    };\r\n\r\n    // 加载数据并刷新视图\r\n    init: (GridJsonRepository) => void = function(GridJsonRepository) {\r\n        let vm =this;\r\n        GridJsonRepository.getAll().then(function(items) {\r\n            angular.forEach(items, function (item, index) {\r\n                let person = new PersonDto();\r\n                person.id = item.id;\r\n                person.name = item.name;\r\n                person.age = item.age;\r\n                person.email = item.email;\r\n                person.dept = item.dept;\r\n                person.telephone = item.telephone;\r\n\r\n                person.gridIndex = index;\r\n                person.itemSelected = false;\r\n\r\n                vm.items.push(person);\r\n            })\r\n            vm.search();\r\n        });\r\n    };\r\n}\r\n\r\nexport = AbstractGridController;"],"sourceRoot":"/source/"}